package com.forSchool.demo;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

@Controller
public class WinnerController {
    /** 학교꺼
    @GetMapping("/star/1")
    public String gogo1() {
        return "start1";   }
    */

    //HTTP 메서드 매핑
    /**
    @RequestMapping(value = "/star/1", method = RequestMethod.GET)
    public String gogo1(){
        return "start1";
    }
    */

    //HTTP 메서드 매핑 축약
    @GetMapping(value="/star/1")
    public String gogo1(){
        return "start1";
    }

    /** 학교꺼
    @GetMapping("/star/2")
    public String gogo2(String choice1,HttpSession session) {
        session.setAttribute("choice1",choice1);
        return "start2";
    }*/
//    @RequestMapping("/star/2") //@GetMapping해도 됨
//    public String gogo2(HttpServletRequest request,HttpSession session){
//        String choice1 =request.getParameter("choice1");
//        session.setAttribute("choice1",choice1);
//        return "start2";
//    }

    /**
     스프링이 제공하는 @RequestParam을 쓰면 요청 파라미터를 매우 편리하게 조회 가능하다.
     @RequestParam-> 파라미터 이름으로 바인딩
     */
//      @GetMapping("/star/2")
//      public String gogo2(@RequestParam("choice1") String choice1,HttpSession session){
//        session.setAttribute("chocie1",choice1);
//        return "start2";
//      }
    /** HTTP 파라미터 이름이 변수 이름과 같으면 @RequestParam("chocie1")에서 ("chocie1") 자체 생략가능*/
//     @GetMapping("/star/2")
//      public String gogo2(@RequestParam String choice1,HttpSession session){
//        session.setAttribute("choice1",choice1);
//        return "start2";
//      }
      /** 매핑 받는 데이터 타입이 String,int Integer등의 단순타입이면 @RequestParam도 생략가능 */
//      @GetMapping("/star/2")
//      public String gogo2(String choice1,HttpSession session){
//          session.setAttribute("choice1",choice1);
//          return "start2";
//      }
      @GetMapping(value = "/star/2", params="choice1=피자")
      public String gogo2(String choice1,HttpSession session){
          session.setAttribute("choice1",choice1);
          return "start2";
      }
    @GetMapping(value = "/star/2", params="choice1=치킨")
    public String gogo22(String choice1,HttpSession session){
        session.setAttribute("choice1",choice1);
        return "start2";
    }

    @GetMapping("/star/3")
    public String gogo3(@RequestParam(value="choice2")String choice2,HttpSession session,Model model) {
        session.setAttribute("choice2",choice2);
        model.addAttribute("choice1",session.getAttribute("choice1"));
        model.addAttribute("choice2",session.getAttribute("choice2"));
        return "start3";
    }
    @GetMapping("/star/winner")
    public String gogo4(@RequestParam(value="winner")String winner, HttpSession session, Model model) {
        session.setAttribute("winner",winner);
        model.addAttribute("winner",session.getAttribute("winner"));
        return "winner";
    }
}
